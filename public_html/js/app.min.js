"use strict";window.application={controllers:{},services:{},config:{}},window.application.config={base:{url:location.origin+"/"},api:{url:location.origin+"/api/v1/"}},function(e,n){window.application.services.feedback={write:function(e){return fetch(n.api.url+"feedback",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"},credentials:"include"})}}}(application.services,application.config),function(n){window.application.services.login={signin:function(e){return fetch(n.api.url+"signin",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"},credentials:"same-origin"})},signup:function(e){return fetch(n.api.url+"signup",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"},credentials:"same-origin"})}}}(application.config),function(e,n,t){var i=document.querySelector("#js-feedback-writing");if(i){var r=i.querySelector("form"),a=r.querySelector("button[type=submit]"),s=i.querySelectorAll(".ui.checkbox"),o=i.querySelector("textarea"),c={message:"",rate:"good",recaptcha:""},u=["message","recaptcha"],l=i.querySelector("#js-message-errors"),p=i.querySelector("#js-message-success"),d=function(){0===u.length?a.disabled=!1:a.disabled=!0};d();var m=function(n){var e=i.querySelector("#js-field-"+n);if(e){var t=e.querySelector(".label");u.map(function(e){n===e?t.classList.remove("hidden"):t.classList.add("hidden")})}},f=function(n){u.map(function(e){e===n&&u.splice(u.indexOf(n),1)}),m(n),d()};o.addEventListener("input",function(e){e.preventDefault();var n,t=e.target.value;0<t.length?f("message"):(n="message",u.map(function(e){e===n&&u.splice(u.indexOf(n),1)}),u.push(n),m(n),d()),c.message=t}),$(s).checkbox({onChange:function(){c.rate=this.value}}),window.onloadRecaptcha=function(){e.render("g-recaptcha",{sitekey:"6LfgRGYUAAAAAM_0AbtnPtio6mnTqBP0kz05q-Bl",callback:function(e){e&&f("recaptcha"),c.recaptcha=e}})},r.addEventListener("submit",function(e){e.preventDefault(),0<u.length||n.write(c).then(function(e){return e.json()}).then(function(e){if(e.success)$(p).dimmer("show"),setTimeout(function(){location=t.base.url},2e3);else{$(l).dimmer("show");var n="<ul>";e.errors.map(function(e){n+="<li>"+e+"</li>"}),n+="</ul>",l.querySelector(".sub.header").innerHTML=n}})})}}(window.grecaptcha,application.services.feedback,application.config),function(t,n){var i=document.querySelector("#js-sign-in");if(i){var r=i.querySelector("form");r.onsubmit=function(e){e.preventDefault(),n.signin({username:r.querySelector("input[name=email]").value,password:r.querySelector("input[name=password]").value}).then(function(e){return e.json()}).then(function(e){if(e.success)$("#js-message-success").dimmer("show"),setTimeout(function(){$("#js-message-success").dimmer("hide"),location=t.base.url},2e3);else{$("#js-message-errors").dimmer("show");var n="<ul>";e.errors.map(function(e){n+="<li>"+e+"</li>"}),n+="</ul>",i.querySelector("#js-message-errors").querySelector(".sub.header").innerHTML=n}})}}}(application.config,application.services.login),function(t,n){var i=document.querySelector("#js-sign-up");if(i){var e=i.querySelector("form"),r=i.querySelector("input[name=username]"),a=i.querySelector("input[name=email]"),s=i.querySelector("input[name=phone]"),o=i.querySelector("input[name=password]"),c=i.querySelector("input[name=password-repeat]"),u=i.querySelector("button[type=submit]"),l={username:"",email:"",phone:"",password:"",passwordRepeat:""};$("input[name=phone]").mask("(000) 000-00-00"),u.disabled=!0;var p=function(){0<d.length?u.disabled=!0:u.disabled=!1},d=["username","email","password","password-repeat"],m=function(n){var e=i.querySelector("input[name="+n+"]");e&&e.nextElementSibling.classList.add("hidden"),d.forEach(function(e){e===n&&d.splice(d.indexOf(n),1)})},f=function(n){var e=i.querySelector("input[name="+n+"]");(e=i.querySelector("input[name="+n+"]"))&&e.nextElementSibling.classList.remove("hidden"),d.forEach(function(e){e===n&&d.splice(d.indexOf(n),1)}),d.push(n)};r.oninput=function(e){e.preventDefault();var n=e.target.value;0<n.length?m("username"):f("username"),l.username=n,p()},a.oninput=function(e){e.preventDefault();var n=e.target.value;e.target.nextElementSibling;/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(n).toLowerCase())?m("email"):f("email"),l.email=n,p()},s.oninput=function(e){e.preventDefault();var n=e.target.value;0<n.length?15===n.length?m("phone"):f("phone"):m("phone"),l.phone=n,p()},o.addEventListener("input",function(e){e.preventDefault();e.target.nextElementSibling;var n=e.target.value;n.length<8?f("password"):m("password"),n!==l.passwordRepeat?f("password-repeat"):m("password-repeat"),l.password=n,p()}),c.addEventListener("input",function(e){e.preventDefault();e.target.nextElementSibling;var n=e.target.value;n!==l.password?f("password-repeat"):m("password-repeat"),l.passwordRepeat=n,p()}),e.onsubmit=function(e){e.preventDefault(),u.disabled=!0,n.signup(l).then(function(e){return e.json()}).then(function(e){if(e.success)$("#js-message-success").dimmer("show"),setTimeout(function(){$("#js-message-success").dimmer("hide"),location=t.base.url+"signin"},2e3);else{u.disabled=!1,$("#js-message-errors").dimmer("show");var n="<ul>";e.errors.map(function(e){n+="<li>"+e+"</li>"}),n+="</ul>",i.querySelector("#js-message-errors").querySelector(".sub.header").innerHTML=n}}).catch(function(e){u.disabled=!1,$("#js-message-error").dimmer("show")})}}}(application.config,application.services.login);